// ------------------ DATASOURCE & GENERATOR ------------------
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ------------------ ENUMS ------------------
enum ACType {
  AC
  NonAC
}

enum YesNo {
  YES
  NO
}

enum VehicleType {
  BIKE
  CAR
  VAN
  SUV
}

// ------------------ TABLES ------------------
model Admin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  role      String   @default("admin")
  createdAt DateTime @default(now())
}

model Room {
  id        Int       @id @default(autoincrement())
  name      String
  beds      Int
  adults    Int
  ac        ACType
  wifi      YesNo
  size      String
  img1      Bytes?
  img2      Bytes?
  img3      Bytes?
  img4      Bytes?
  video     Bytes?     // <15MB
  createdAt DateTime   @default(now())

  bookings  Booking[]
}

model Customer {
  id            Int       @id @default(autoincrement())
  name          String
  passportNumber String
  nicNumber     String
  address       String
  contactNumber String

  bookings      Booking[]
}

model Booking {
  id           Int          @id @default(autoincrement())
  roomId       Int
  customerId   Int
  checkIn      DateTime
  checkOut     DateTime

  room         Room         @relation(fields: [roomId], references: [id])
  customer     Customer     @relation(fields: [customerId], references: [id])
  otherDetails OtherDetails?
}

model OtherDetails {
  id             Int         @id @default(autoincrement())
  bookingId      Int         @unique
  vehicleSupport YesNo       @default(NO)
  meal           YesNo       @default(NO)
  guide          YesNo       @default(NO)
  vehicleType    VehicleType?
  vehicleNumber  Int?
  driver         YesNo?

  booking Booking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
}
