// ------------------ DATASOURCE & GENERATOR ------------------
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ------------------ ENUMS ------------------

enum ACType {
  AC
  NonAC
}

enum YesNo {
  YES
  NO
}

enum VehicleType {
  BIKE
  CAR
  VAN
  SUV
}

enum BedType {
  SINGLE
  DOUBLE
  QUEEN
  KING
  TWIN
  DOUBLE_ROOM
  TRIPLE
  FAMILY
}

// ------------------ TABLES ------------------

model Admin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  role      String   @default("admin")
  createdAt DateTime @default(now())
}

model Room {
  id        Int       @id @default(autoincrement())
  name      String
  cost      Float
  offer     Float?
  size      String
  capacity  Int      @default(1)

  // basic amenities
  ac           ACType
  wifi         YesNo
  fan          YesNo
  balcony      YesNo
  gardenView   YesNo
  tv           YesNo
  iron         YesNo
  locker       YesNo
  parking      YesNo
  sittingArea  YesNo
  dryingRack   YesNo
  clothRack    YesNo

  // media
  img1      Bytes?
  img2      Bytes?
  img3      Bytes?
  img4      Bytes?
  video     Bytes?

  createdAt DateTime   @default(now())

  // relations
  bedrooms   Bedroom[]
  bathrooms  Bathroom[]
  kitchen    Kitchen?
  bookings   Booking[]
}

model Bedroom {
  id        Int      @id @default(autoincrement())
  room      Room     @relation(fields: [roomId], references: [id], onDelete: Cascade)
  roomId    Int
  bedType   BedType
  count     Int
}

model Bathroom {
  id              Int      @id @default(autoincrement())
  room            Room     @relation(fields: [roomId], references: [id], onDelete: Cascade)
  roomId          Int
  shower          YesNo
  slipper         YesNo
  soap            YesNo
  bidet           YesNo
  towels          YesNo
  toiletPaper     YesNo
  hotWater        YesNo
  privateBathroom YesNo
}

model Kitchen {
  id            Int      @id @default(autoincrement())
  room          Room     @relation(fields: [roomId], references: [id], onDelete: Cascade)
  roomId        Int      @unique
  diningTable    YesNo
  gasCooker      YesNo
  riceCooker     YesNo
  woodStove      YesNo
  fridge         YesNo
  electricKettle YesNo
  waterBottle    YesNo
}

model Customer {
  id            Int       @id @default(autoincrement())
  name          String
  passportNumber String?  @unique
  nicNumber      String?  @unique
  address       String
  contactNumber String

  bookings      Booking[]
}

model Booking {
  id           Int          @id @default(autoincrement())
  roomId       Int
  customerId   Int
  checkIn      DateTime
  checkOut     DateTime

  room         Room         @relation(fields: [roomId], references: [id], onDelete: Cascade)
  customer     Customer     @relation(fields: [customerId], references: [id])
  otherDetails OtherDetails?
}

model OtherDetails {
  id             Int         @id @default(autoincrement())
  bookingId      Int         @unique
  vehicleSupport YesNo       @default(NO)
  meal           YesNo       @default(NO)
  guide          YesNo       @default(NO)
  vehicleType    VehicleType?
  vehicleNumber  Int?
  driver         YesNo?

  booking Booking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
}
